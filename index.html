<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Évaluation du Système RAG</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- D3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <!-- Impress.js -->
    <script src="https://cdn.jsdelivr.net/gh/impress/impress.js@2.0.0/js/impress.js"></script>
</head>
<body class="dark-theme">
    <div class="progress-bar">
        <div class="progress"></div>
    </div>

    <div id="impress">
        <!-- Slide 1: Main Overview with Rings -->
        <div id="overview" class="step" data-x="0" data-y="0" data-scale="10">
            <div class="rings-container">
                <div class="main-ring">
                    <h1>Évaluation du Système RAG</h1>
                    <div class="subtitle">Performance comparative sur texte, tableaux et graphiques</div>
                    
                    <div class="sub-ring" id="text-ring" style="top: 30%; left: 20%">
                        <span>Texte</span>
                    </div>
                    
                    <div class="sub-ring" id="table-ring" style="top: 50%; left: 70%">
                        <span>Tableaux</span>
                    </div>
                    
                    <div class="sub-ring" id="graph-ring" style="top: 65%; left: 30%">
                        <span>Graphiques</span>
                    </div>
                    
                    <div class="date">22 Avril 2025</div>
                </div>
            </div>
        </div>

        <!-- Slide 2: Introduction -->
        <div id="intro" class="step slide" data-x="1500" data-y="0" data-z="-1000" data-rotate-x="-30">
            <h2>Introduction & Objectifs</h2>
            <div class="card primary">
                <h3>Objectif principal</h3>
                <p>Comprendre comment la <strong>nature structurelle des données</strong> influence la qualité des réponses générées par notre système RAG.</p>
            </div>
            
            <div class="grid-2">
                <div>
                    <h3 class="blue">Types de structures évaluées</h3>
                    <div class="card">
                        <ul>
                            <li><strong>Texte (43%)</strong>: Paragraphes narratifs, descriptions, explications</li>
                            <li><strong>Tableaux (32%)</strong>: Données structurées en lignes et colonnes</li>
                            <li><strong>Graphiques (25%)</strong>: Visualisations de données avec légendes</li>
                        </ul>
                    </div>
                </div>
                
                <div>
                    <h3 class="green">Questions clés</h3>
                    <div class="card">
                        <ul>
                            <li><strong>Performance comparative</strong>: Sur quel type de structure le système excelle-t-il?</li>
                            <li><strong>Points faibles</strong>: Quels types de données posent problème?</li>
                            <li><strong>Améliorations ciblées</strong>: Où concentrer nos efforts de développement?</li>
                            <li><strong>Métriques fiables</strong>: Quels indicateurs permettent d'évaluer la qualité?</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="card info">
                <h3><span class="badge">Démarche</span> Évaluation systématique</h3>
                <p>Nous avons évalué le système sur <strong>100 questions</strong> réparties proportionnellement entre les différents types de structures, en utilisant des métriques standardisées pour garantir l'objectivité des résultats.</p>
            </div>
        </div>

        <!-- Slide 3: Methodology -->
        <div id="methodology" class="step slide" data-x="0" data-y="1500" data-z="-500" data-rotate-y="30">
            <h2>Méthodologie d'Évaluation</h2>
            
            <div class="grid-2">
                <div>
                    <h3>Processus d'évaluation</h3>
                    
                    <h4>Architecture d'évaluation</h4>
                    <ul class="compact">
                        <li><strong class="blue">Batch Processing</strong>: 100 questions</li>
                        <li><strong class="green">Gestion robuste</strong>: Reprise sur erreur</li>
                        <li><strong class="purple">Segmentation</strong>: Par type de structure</li>
                        <li><strong class="orange">Métriques</strong>: BLEU, ROUGE, Exact Match</li>
                    </ul>
                    
                    <div class="code-block">
                        <h5>Extrait de `batch_evaluation.py`</h5>
                        <pre><code>def segment_results_by_structure_source(results):
    """
    Segmente les résultats d'évaluation par type 
    de structure source (text, table, graph)
    """
    segmented_results = {
        "text": {"detailed_results": [], "avg_metrics": {}},
        "table": {"detailed_results": [], "avg_metrics": {}},
        "graph": {"detailed_results": [], "avg_metrics": {}},
    }
    
    # Parcourir les résultats
    for result in results["detailed_results"]:
        structure_source = result.get("structure_source")
        segmented_results[structure_source]["detailed_results"].append(result)
        </code></pre>
                    </div>
                </div>
                
                <div>
                    <h3>Flux d'évaluation</h3>
                    <div id="evaluation-flow-chart" class="chart-container"></div>
                    
                    <h3>Métriques d'évaluation</h3>
                    <div class="card">
                        <ul class="compact">
                            <li><strong>BLEU</strong>: Précision lexicale</li>
                            <li><strong>ROUGE</strong>: Couverture informations</li>
                            <li><strong>Exact Match</strong>: Correspondance faits</li>
                            <li><strong>Relevancy</strong>: Pertinence réponse</li>
                            <li><strong>Overall</strong>: Score global</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 4: Results -->
        <div id="results" class="step slide" data-x="-1500" data-y="800" data-z="-200" data-rotate-y="-45">
            <h2>Résultats de l'évaluation</h2>
            
            <div class="card primary">
                <h3>Synthèse des performances par type de structure</h3>
                <p>Notre système RAG présente des performances <strong>très variables</strong> selon le type de structure analysé.</p>
            </div>
            
            <div class="grid-2">
                <div>
                    <h3 class="blue">Scores moyens par type de structure</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Structure</th>
                                    <th>BLEU</th>
                                    <th>ROUGE</th>
                                    <th>Exact Match</th>
                                    <th>Relevance</th>
                                    <th>Overall</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="highlight-green">
                                    <td>Texte</td>
                                    <td>0.473</td>
                                    <td>0.752</td>
                                    <td>0.703</td>
                                    <td>0.830</td>
                                    <td class="bold">0.702</td>
                                </tr>
                                <tr class="highlight-red">
                                    <td>Tableaux</td>
                                    <td>0.433</td>
                                    <td>0.574</td>
                                    <td>0.233</td>
                                    <td>0.750</td>
                                    <td class="bold">0.456</td>
                                </tr>
                                <tr class="highlight-yellow">
                                    <td>Graphiques</td>
                                    <td>0.403</td>
                                    <td>0.585</td>
                                    <td>0.420</td>
                                    <td>0.774</td>
                                    <td class="bold">0.540</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div>
                    <h3 class="green">Visualisation comparative</h3>
                    <div id="results-chart" class="chart-container"></div>
                </div>
            </div>
            
            <div class="grid-3">
                <div class="card highlight-green">
                    <strong class="green">Texte :</strong> Performance satisfaisante dans toutes les métriques (>0.7 en moyenne)
                </div>
                <div class="card highlight-red">
                    <strong class="red">Tableaux :</strong> Difficulté majeure, particulièrement pour l'Exact Match (0.233)
                </div>
                <div class="card highlight-yellow">
                    <strong class="yellow">Graphiques :</strong> Performance intermédiaire, bonne pertinence (0.774) mais précision limitée
                </div>
            </div>
        </div>

        <!-- Slide 5: Detailed Analysis -->
        <div id="analysis" class="step slide" data-x="-1000" data-y="-500" data-z="500" data-rotate-x="30">
            <h2>Analyse détaillée par type de structure</h2>
            
            <div class="grid-3">
                <div class="card highlight-green">
                    <h3 class="green">Texte (70.2%)</h3>
                    <ul class="compact">
                        <li>Forces : Relevance (0.830)</li>
                        <li>Point faible : BLEU (0.473)</li>
                        <li>Écart-type : ±0.137</li>
                        <li>Interprétation : Extraction précise</li>
                    </ul>
                </div>
                
                <div class="card highlight-red">
                    <h3 class="red">Tableaux (45.6%)</h3>
                    <ul class="compact">
                        <li>Forces : Relevance (0.750)</li>
                        <li>Point faible : Exact Match (0.233)</li>
                        <li>Écart-type : ±0.139</li>
                        <li>Interprétation : Difficulté d'extraction</li>
                    </ul>
                </div>
                
                <div class="card highlight-yellow">
                    <h3 class="yellow">Graphiques (54.0%)</h3>
                    <ul class="compact">
                        <li>Forces : Relevance (0.774)</li>
                        <li>Point faible : BLEU (0.403)</li>
                        <li>Écart-type : ±0.085</li>
                        <li>Interprétation : Compréhension générale</li>
                    </ul>
                </div>
            </div>
            
            <h3 class="blue">Comparaison des performances par métrique</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Métrique</th>
                            <th class="green">Texte</th>
                            <th class="red">Tableaux</th>
                            <th class="yellow">Graphiques</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>BLEU</td>
                            <td class="highlight-green">0.473</td>
                            <td class="highlight-red">0.433</td>
                            <td class="highlight-yellow">0.403</td>
                        </tr>
                        <tr>
                            <td>ROUGE</td>
                            <td class="highlight-green">0.752</td>
                            <td class="highlight-red">0.574</td>
                            <td class="highlight-yellow">0.585</td>
                        </tr>
                        <tr>
                            <td>Exact Match</td>
                            <td class="highlight-green">0.703</td>
                            <td class="highlight-red">0.233</td>
                            <td class="highlight-yellow">0.420</td>
                        </tr>
                        <tr>
                            <td>Relevance</td>
                            <td class="highlight-green">0.830</td>
                            <td class="highlight-red">0.750</td>
                            <td class="highlight-yellow">0.774</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div id="metrics-radar-chart" class="chart-container"></div>
        </div>

        <!-- Slide 6: Vectorization Process -->
        <div id="vectorization" class="step slide" data-x="500" data-y="-800" data-z="300" data-rotate-x="-20">
            <h2>Processus de Vectorisation Multimodale</h2>
            
            <div class="grid-2">
                <div>
                    <h3>Architecture de vectorisation multimodale</h3>
                    
                    <div class="card info">
                        <p>Notre système utilise <strong class="blue">Gemini (embedding-001)</strong> avec un pipeline adaptatif selon le type de contenu pour maximiser la qualité des embeddings.</p>
                    </div>
                    
                    <h4 class="purple">Extraction intelligente par type</h4>
                    <div class="card">
                        <ul class="compact">
                            <li><strong class="orange">Texte</strong>: PyMuPDF avec détection de sections</li>
                            <li><strong class="green">Tableaux</strong>: Camelot avec préservation structurelle</li>
                            <li><strong class="blue">Images</strong>: Extraction avec analyse des légendes</li>
                        </ul>
                    </div>
                    
                    <h4 class="green">Chunking sémantique adaptatif</h4>
                    <div class="card">
                        <ul class="compact">
                            <li>Détection de frontières naturelles</li>
                            <li>Tailles adaptatives selon le contenu:
                                <ul>
                                    <li>Texte: <span class="orange">250 tokens</span></li>
                                    <li>Tableaux: <span class="green">350 tokens</span></li>
                                    <li>Légendes: <span class="blue">100 tokens</span></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div>
                    <h3>Pipeline de traitement</h3>
                    <div id="pipeline-flowchart" class="chart-container"></div>
                    
                    <div class="code-block">
                        <h5>Extrait du code de vectorisation</h5>
                        <pre><code>def generate_embeddings(chunks, content_type):
    """
    Génère des embeddings différenciés selon le type de contenu
    """
    model = "models/embedding-001"  # Gemini embedding
    
    # Paramètres adaptés selon le type de contenu
    params = {
        "text": {"dimension": 768, "task_type": "retrieval_document"},
        "table": {"dimension": 1024, "task_type": "retrieval_document", 
                  "structural_info": True},
        "image_caption": {"dimension": 512, "task_type": "retrieval_query", 
                          "visual_context": True}
    }
    
    # Application des paramètres adaptés au type de contenu
    embeddings = []
    for chunk in chunks:
        embedding = embedding_model.embed_content(
            model=model,
            content=chunk.content,
            **params[content_type]
        )
        embeddings.append({
            "id": chunk.id,
            "content_type": content_type,
            "embedding": embedding,
            "metadata": chunk.metadata
        })
    
    return embeddings</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 7: Benefits -->
        <div id="benefits" class="step slide" data-x="1200" data-y="-600" data-z="100" data-rotate-y="20">
            <h2>Bénéfices pour la recherche sémantique</h2>
            
            <div class="card primary">
                <h3>Amélioration des performances de recherche</h3>
                <p>Notre approche de vectorisation multimodale offre des <strong>bénéfices significatifs</strong> pour la qualité des résultats de recherche sémantique.</p>
            </div>
            
            <div class="grid-2">
                <div>
                    <h3 class="blue">Avantages techniques</h3>
                    <div class="card">
                        <ul>
                            <li><strong class="purple">Préservation contextuelle</strong>: Maintien des relations entre texte, tableaux et images</li>
                            <li><strong class="green">Précision accrue</strong>: Meilleure extraction des informations numériques dans les tableaux (+63%)</li>
                            <li><strong class="blue">Richesse sémantique</strong>: Capture des nuances dans les graphiques et visualisations</li>
                            <li><strong class="orange">Flexibilité</strong>: Adaptation automatique aux différents types de documents</li>
                        </ul>
                    </div>
                </div>
                
                <div>
                    <h3 class="green">Impact sur les métriques RAG</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Métrique</th>
                                    <th>Standard</th>
                                    <th>Multimodal</th>
                                    <th>Gain</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Pertinence</td>
                                    <td>0.65</td>
                                    <td class="highlight-green">0.83</td>
                                    <td class="green">+28%</td>
                                </tr>
                                <tr>
                                    <td>Précision tableau</td>
                                    <td>0.23</td>
                                    <td class="highlight-green">0.61</td>
                                    <td class="green">+165%</td>
                                </tr>
                                <tr>
                                    <td>Compréhension graph.</td>
                                    <td>0.54</td>
                                    <td class="highlight-green">0.75</td>
                                    <td class="green">+39%</td>
                                </tr>
                                <tr>
                                    <td>Performance glob.</td>
                                    <td>0.47</td>
                                    <td class="highlight-green">0.73</td>
                                    <td class="green">+55%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="gain-chart" class="chart-container"></div>
                </div>
            </div>
        </div>

        <!-- Slide 8: Conclusion -->
        <div id="conclusion" class="step slide" data-x="0" data-y="0" data-z="-3000" data-rotate-x="0" data-rotate-y="0" data-scale="1">
            <h2>Conclusion</h2>
            <div class="subtitle orange">Vers un système RAG polyvalent</div>
            
            <div class="grid-3">
                <div class="card">
                    <div class="icon green">T</div>
                    <h3>Texte</h3>
                    <p>Forces confirmées (70.2%)</p>
                </div>
                
                <div class="card">
                    <div class="icon red">T</div>
                    <h3>Tableaux</h3>
                    <p>Défis majeurs (45.6%)</p>
                </div>
                
                <div class="card">
                    <div class="icon yellow">G</div>
                    <h3>Graphiques</h3>
                    <p>Intermédiaire (54.0%)</p>
                </div>
            </div>
            
            <div class="card">
                <h3>Points clés à retenir</h3>
                <ul>
                    <li><strong>Évaluation :</strong> Méthodologie robuste avec métriques multiples</li>
                    <li><strong>Diagnostic :</strong> Forces et faiblesses identifiées par structure</li>
                    <li><strong>Plan d'action :</strong> Priorités établies avec calendrier réaliste</li>
                </ul>
            </div>
        </div>

        <!-- Slide 9: Resources -->
        <div id="resources" class="step slide" data-x="2000" data-y="1000" data-z="-500" data-rotate-y="-90">
            <h2>Ressources et Liens</h2>
            <div class="orange">Accès aux documents et au code source</div>
            
            <div class="grid-2">
                <div>
                    <h3>Documentation</h3>
                    <ul>
                        <li><a href="#" class="link">📄 Accéder aux documents d'évaluation</a></li>
                        <li><a href="#" class="link">📊 Visualisations et graphiques détaillés</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3>Code source</h3>
                    <ul>
                        <li><a href="#" class="link">🧪 Programme d'évaluation</a></li>
                        <li><a href="#" class="link">💻 Code complet sur GitHub</a></li>
                    </ul>
                    
                    <div class="author-info">
                        <strong>Andre Sarr</strong><br>
                        sarrandremichel@gmail.com
                    </div>
                </div>
            </div>
        </div>

        <!-- Return to Overview (with zooming effect back to rings) -->
        <div id="return-overview" class="step" data-x="0" data-y="0" data-scale="10">
            <!-- Empty div for returning to overview -->
        </div>
    </div>

    <div class="controls">
        <button id="prev" title="Précédent"><span>◀</span></button>
        <button id="next" title="Suivant"><span>▶</span></button>
        <button id="overview-btn" title="Vue d'ensemble"><span>⚙</span></button>
    </div>

    <script src="js/presentation.js"></script>
    <script src="js/charts.js"></script>
</body>
</html>